define(function(require,module,exports){require("jquery"),require("underscore"),require("layDate"),require("layer"),require("layerCss"),$(function(){var App=function(){this.url={a:"a.html"},this.tpl={subWraperTpl:_.template($("#subWraperTpl").html()),elevatorItemTpl:_.template($("#elevatorItemTpl").html())},this.init(),this.citySelect(),this.dateSelect(),this.addHouse(),this.addSubhouse(),this.addElevator()};App.prototype={init:function(){},citySelect:function(){require.async("cxSelect",function(){$("#groupSelect").cxSelect({url:"js/plugin/cxSelect/cityData.min.js",selects:["province","city","area"]})})},dateSelect:function(){laydate({elem:"#cooperStart"}),laydate({elem:"#cooperEnd"})},addHouse:function(){var self=this;require.async("jqueryForm",function(){require.async("jqueryValidate",function(){self.validate=$("#addForm").validate({rules:{city:{required:!0},area:{required:!0},cooperStart:{required:!0},cooperEnd:{required:!0},loupan:{required:!0}},messages:{city:{required:"城市为必填项"},area:{required:"区域为必填项"},cooperStart:{required:"合作期限不能为空"},cooperEnd:{required:"合作期限不能为空"},loupan:{required:"楼盘为必填项"}},errorPlacement:function(error,element){$("#formError").html(error)},submitHandler:function(form){var $province=$("#province"),$city=$("#city"),$area=$("#area"),$cooperStart=($("#address"),$("#cooperStart")),$cooperEnd=$("#cooperEnd"),$loupan=$("#loupan");$("#mainName").text($loupan.val()),$("#mainTime").text($cooperStart.val()+"——"+$cooperEnd.val()),$("#mainArress").text($province.val()+$city.val()+$area.val()),$("#addForm").slideUp(),$("#addWraper").slideDown()}})})})},addSubhouse:function(){$("#addSubHouseBtn").on("click",function(){layer.open({type:2,area:["400px","300px"],fix:!1,maxmin:!0,content:"addSubHouse.hbs"})})},createSubhouse:function(subName){var self=this,data={subName:subName,timestap:1*new Date},html=self.tpl.subWraperTpl(data);$("#elevatorContainer").append(html)},addElevator:function(){$("body").on("click",".addElevatorBtn",function(){var id=$(this).attr("data-id");layer.open({type:2,area:["600px","300px"],fix:!1,maxmin:!0,content:"addElevator.hbs?id="+id})})},createElevator:function(data){var self=this,html=self.tpl.elevatorItemTpl(data);$("#"+data.subHouseId).append(html)}},app=new App})});